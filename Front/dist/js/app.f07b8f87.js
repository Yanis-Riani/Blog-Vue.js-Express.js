(function(e){function t(t){for(var r,n,o=t[0],i=t[1],l=t[2],u=0,b=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&b.push(a[n][0]),a[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(b.length)b.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],r=!0,n=1;n<s.length;n++){var i=s[n];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},a={app:0},c=[];function n(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a4c1e":"cccb47e4","chunk-2d0c85f8":"a767e42b","chunk-2d0d03d6":"e009b77c","chunk-2d0e5991":"bed010d2"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=a[e];if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(t,r){s=a[e]=[t,r]}));t.push(s[2]=r);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=n(e);var l=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(u);var s=a[e];if(0!==s){if(s){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",l.name="ChunkLoadError",l.type=r,l.request=c,s[1](l)}a[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;c.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"1f57":function(e,t,s){"use strict";var r=s("bc3a"),a=s.n(r);function c(){let e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}const n="https://blog-back-z73f.onrender.com/api/test/";class o{getPublicContent(){return a.a.get(n+"all")}getUserBoard(){return a.a.get(n+"user",{headers:c()})}getModeratorBoard(){return a.a.get(n+"mod",{headers:c()})}getAdminBoard(){return a.a.get(n+"admin",{headers:c()})}}t["a"]=new o},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("7a23");const a={id:"app"},c={class:"navbar navbar-expand navbar-dark bg-dark"},n=Object(r["g"])("a",{href:"/",class:"navbar-brand"},"Blog",-1),o={class:"navbar-nav mr-auto"},i={class:"nav-item"},l={key:0,class:"nav-item"},u={class:"nav-item"},d={key:0,class:"navbar-nav ml-auto"},b={class:"nav-item"},g={class:"nav-item"},m={key:1,class:"navbar-nav ml-auto"},O={class:"nav-item"},h={class:"nav-item"},j={class:"container"};function p(e,t,s,p,f,v){const y=Object(r["E"])("font-awesome-icon"),k=Object(r["E"])("router-link"),w=Object(r["E"])("router-view");return Object(r["x"])(),Object(r["f"])("div",a,[Object(r["g"])("nav",c,[n,Object(r["g"])("div",o,[Object(r["g"])("li",i,[Object(r["i"])(k,{to:"/home",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["i"])(y,{icon:"home"}),Object(r["h"])(" Page d'accueil ")]),_:1})]),v.showAdminBoard?(Object(r["x"])(),Object(r["f"])("li",l,[Object(r["i"])(k,{to:"/admin",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["h"])("Page administrateur")]),_:1})])):Object(r["e"])("",!0),Object(r["g"])("li",u,[v.currentUser?(Object(r["x"])(),Object(r["d"])(k,{key:0,to:"/user",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["h"])("Utilisateur")]),_:1})):Object(r["e"])("",!0)])]),v.currentUser?Object(r["e"])("",!0):(Object(r["x"])(),Object(r["f"])("div",d,[Object(r["g"])("li",b,[Object(r["i"])(k,{to:"/register",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["i"])(y,{icon:"user-plus"}),Object(r["h"])(" S'inscrire ")]),_:1})]),Object(r["g"])("li",g,[Object(r["i"])(k,{to:"/login",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["i"])(y,{icon:"sign-in-alt"}),Object(r["h"])(" Se connecter ")]),_:1})])])),v.currentUser?(Object(r["x"])(),Object(r["f"])("div",m,[Object(r["g"])("li",O,[Object(r["i"])(k,{to:"/profile",class:"nav-link"},{default:Object(r["P"])(()=>[Object(r["i"])(y,{icon:"user"}),Object(r["h"])(" "+Object(r["H"])(v.currentUser.username),1)]),_:1})]),Object(r["g"])("li",h,[Object(r["g"])("a",{class:"nav-link",onClick:t[0]||(t[0]=Object(r["R"])((...e)=>v.logOut&&v.logOut(...e),["prevent"]))},[Object(r["i"])(y,{icon:"sign-out-alt"}),Object(r["h"])(" Se dÃ©connecter ")])])])):Object(r["e"])("",!0)]),Object(r["g"])("div",j,[Object(r["i"])(w)])])}var f={computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_ADMIN")},showModeratorBoard(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_MODERATOR")}},methods:{logOut(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}}},v=s("6b0d"),y=s.n(v);const k=y()(f,[["render",p]]);var w=k,x=s("6605");s("1f57");const P=e=>(Object(r["A"])("data-v-66e78634"),e=e(),Object(r["y"])(),e),S={class:"search-wrapper panel-heading col-sm-12"},E=P(()=>Object(r["g"])("br",null,null,-1)),I=P(()=>Object(r["g"])("br",null,null,-1)),_=["onClick"],M=P(()=>Object(r["g"])("hr",null,null,-1)),L={key:0,class:"lds-dual-ring"},U={href:"#"},C={href:"#"};function F(e,t,s,a,c,n){return Object(r["x"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("div",S,[Object(r["Q"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>c.search=e),placeholder:"Rechercher"},null,512),[[r["K"],c.search]]),Object(r["h"])(),E,I]),Object(r["g"])("li",null,[Object(r["g"])("button",{onClick:t[1]||(t[1]=e=>n.setCat(""))},"Aucun")]),(Object(r["x"])(!0),Object(r["f"])(r["a"],null,Object(r["D"])(c.categories,e=>(Object(r["x"])(),Object(r["f"])("li",{key:e.id},[Object(r["g"])("button",{onClick:t=>n.setCat(e.category)},Object(r["H"])(e.category),9,_)]))),128)),M,c.isLoading?(Object(r["x"])(),Object(r["f"])("div",L)):Object(r["e"])("",!0),(Object(r["x"])(!0),Object(r["f"])(r["a"],null,Object(r["D"])(n.filteredPosts,e=>(Object(r["x"])(),Object(r["f"])("div",{key:e.id},[Object(r["g"])("a",U,[Object(r["g"])("h2",null,Object(r["H"])(e.id)+" - "+Object(r["H"])(e.title),1)]),Object(r["g"])("a",C,[Object(r["g"])("p",null,Object(r["H"])(e.category),1)]),Object(r["g"])("p",null,Object(r["H"])(e.body),1)]))),128))],64)}var q={name:"Articles",data(){return{post:[],isLoading:!1,search:"",category:"",categories:[]}},created(){let e=new URLSearchParams(window.location.search),t=e.get("category");t&&(this.category=e.get("category"))},methods:{getPosts(){this.isLoading=!0,fetch("https://api.npoint.io/7114a70b681e87f0eb24").then(e=>e.json()).then(e=>{this.post=e,this.isLoading=!1})},getCat(){fetch("https://api.npoint.io/b7958756c9179e8a6d24").then(e=>e.json()).then(e=>{this.categories=e,console.log(this.categories)})},setCat(e){this.category=e,console.log(e)}},computed:{filteredPosts(){return this.post.filter(e=>{let t=!1;return-1!=e.title.toLowerCase().indexOf(this.search.toLowerCase())&&(t=!0),""==this.category||"None"==this.category?t:!(!t||e.category.toLowerCase()!=this.category.toLowerCase())||void 0})}},mounted(){this.getPosts(),this.getCat()}};s("8098");const A=y()(q,[["render",F],["__scopeId","data-v-66e78634"]]);var R=A;const $={class:"col-md-12"},H={class:"card card-container"},T=Object(r["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1),B={class:"form-group"},N=Object(r["g"])("label",{for:"username"},"Nom d'utilisateur",-1),J={class:"form-group"},D=Object(r["g"])("label",{for:"password"},"Mot de passe",-1),Q={class:"form-group"},z=["disabled"],K={class:"spinner-border spinner-border-sm"},V=Object(r["g"])("span",null,"Se connecter",-1),G={class:"form-group"},W={key:0,class:"alert alert-danger",role:"alert"};function X(e,t,s,a,c,n){const o=Object(r["E"])("Field"),i=Object(r["E"])("ErrorMessage"),l=Object(r["E"])("Form");return Object(r["x"])(),Object(r["f"])("div",$,[Object(r["g"])("div",H,[T,Object(r["i"])(l,{onSubmit:n.handleLogin,"validation-schema":c.schema},{default:Object(r["P"])(()=>[Object(r["g"])("div",B,[N,Object(r["i"])(o,{name:"username",type:"text",class:"form-control"}),Object(r["i"])(i,{name:"username",class:"error-feedback"})]),Object(r["g"])("div",J,[D,Object(r["i"])(o,{name:"password",type:"password",class:"form-control"}),Object(r["i"])(i,{name:"password",class:"error-feedback"})]),Object(r["g"])("div",Q,[Object(r["g"])("button",{class:"btn btn-primary btn-block",disabled:c.loading},[Object(r["Q"])(Object(r["g"])("span",K,null,512),[[r["L"],c.loading]]),V],8,z)]),Object(r["g"])("div",G,[c.message?(Object(r["x"])(),Object(r["f"])("div",W,Object(r["H"])(c.message),1)):Object(r["e"])("",!0)])]),_:1},8,["onSubmit","validation-schema"])])])}var Y=s("7bb1"),Z=s("506a"),ee={name:"Login",components:{Form:Y["c"],Field:Y["b"],ErrorMessage:Y["a"]},data(){const e=Z["a"]().shape({username:Z["b"]().required("Username is required!"),password:Z["b"]().required("Password is required!")});return{loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin(e){this.loading=!0,this.$store.dispatch("auth/login",e).then(()=>{this.$router.push("/profile")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}};const te=y()(ee,[["render",X]]);var se=te;const re={class:"col-md-12"},ae={class:"card card-container"},ce=Object(r["g"])("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1),ne={key:0},oe={class:"form-group"},ie=Object(r["g"])("label",{for:"username"},"Nom d'utilisateur",-1),le={class:"form-group"},ue=Object(r["g"])("label",{for:"email"},"Email",-1),de={class:"form-group"},be=Object(r["g"])("label",{for:"password"},"Mot de passe",-1),ge={class:"form-group"},me=["disabled"],Oe={class:"spinner-border spinner-border-sm"};function he(e,t,s,a,c,n){const o=Object(r["E"])("Field"),i=Object(r["E"])("ErrorMessage"),l=Object(r["E"])("Form");return Object(r["x"])(),Object(r["f"])("div",re,[Object(r["g"])("div",ae,[ce,Object(r["i"])(l,{onSubmit:n.handleRegister,"validation-schema":c.schema},{default:Object(r["P"])(()=>[c.successful?Object(r["e"])("",!0):(Object(r["x"])(),Object(r["f"])("div",ne,[Object(r["g"])("div",oe,[ie,Object(r["i"])(o,{name:"username",type:"text",class:"form-control"}),Object(r["i"])(i,{name:"username",class:"error-feedback"})]),Object(r["g"])("div",le,[ue,Object(r["i"])(o,{name:"email",type:"email",class:"form-control"}),Object(r["i"])(i,{name:"email",class:"error-feedback"})]),Object(r["g"])("div",de,[be,Object(r["i"])(o,{name:"password",type:"password",class:"form-control"}),Object(r["i"])(i,{name:"password",class:"error-feedback"})]),Object(r["g"])("div",ge,[Object(r["g"])("button",{class:"btn btn-primary btn-block",disabled:c.loading},[Object(r["Q"])(Object(r["g"])("span",Oe,null,512),[[r["L"],c.loading]]),Object(r["h"])(" S'inscrire ")],8,me)])]))]),_:1},8,["onSubmit","validation-schema"]),c.message?(Object(r["x"])(),Object(r["f"])("div",{key:0,class:Object(r["r"])(["alert",c.successful?"alert-success":"alert-danger"])},Object(r["H"])(c.message),3)):Object(r["e"])("",!0)])])}var je={name:"Register",components:{Form:Y["c"],Field:Y["b"],ErrorMessage:Y["a"]},data(){const e=Z["a"]().shape({username:Z["b"]().required("Username is required!").min(3,"Must be at least 3 characters!").max(20,"Must be maximum 20 characters!"),email:Z["b"]().required("Email is required!").email("Email is invalid!").max(50,"Must be maximum 50 characters!"),password:Z["b"]().required("Password is required!").min(6,"Must be at least 6 characters!").max(40,"Must be maximum 40 characters!")});return{successful:!1,loading:!1,message:"",schema:e}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},mounted(){this.loggedIn&&this.$router.push("/profile")},methods:{handleRegister(e){this.message="",this.successful=!1,this.loading=!0,this.$store.dispatch("auth/register",e).then(e=>{this.message=e.message,this.successful=!0,this.loading=!1},e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.successful=!1,this.loading=!1})}}};const pe=y()(je,[["render",he]]);var fe=pe;const ve=()=>s.e("chunk-2d0d03d6").then(s.bind(null,"66aa")),ye=()=>s.e("chunk-2d0c85f8").then(s.bind(null,"5535")),ke=()=>s.e("chunk-2d0a4c1e").then(s.bind(null,"0899")),we=[{path:"/",name:"Articles",component:R},{path:"/home",component:R},{path:"/login",component:se},{path:"/register",component:fe},{path:"/profile",name:"profile",component:ve},{path:"/admin",name:"admin",component:ye},{path:"/user",name:"user",component:ke}],xe=Object(x["a"])({history:Object(x["b"])(),routes:we});xe.beforeEach((e,t,s)=>{const r=["/login","/register","/home"],a=!r.includes(e.path),c=localStorage.getItem("user");a&&!c?s("/login"):s()});var Pe=xe,Se=s("5502"),Ee=s("bc3a"),Ie=s.n(Ee);const _e="https://blog-back-z73f.onrender.com/api/auth/";class Me{login(e){return Ie.a.post(_e+"signin",{username:e.username,password:e.password}).then(e=>(e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data))}logout(){localStorage.removeItem("user")}register(e){return Ie.a.post(_e+"signup",{username:e.username,email:e.email,password:e.password})}}var Le=new Me;const Ue=JSON.parse(localStorage.getItem("user")),Ce=Ue?{status:{loggedIn:!0},user:Ue}:{status:{loggedIn:!1},user:null},Fe={namespaced:!0,state:Ce,actions:{login({commit:e},t){return Le.login(t).then(t=>(e("loginSuccess",t),Promise.resolve(t)),t=>(e("loginFailure"),Promise.reject(t)))},logout({commit:e}){Le.logout(),e("logout")},register({commit:e},t){return Le.register(t).then(t=>(e("registerSuccess"),Promise.resolve(t.data)),t=>(e("registerFailure"),Promise.reject(t)))}},mutations:{loginSuccess(e,t){e.status.loggedIn=!0,e.user=t},loginFailure(e){e.status.loggedIn=!1,e.user=null},logout(e){e.status.loggedIn=!1,e.user=null},registerSuccess(e){e.status.loggedIn=!1},registerFailure(e){e.status.loggedIn=!1}}},qe=Object(Se["a"])({modules:{auth:Fe}});var Ae=qe,Re=(s("4989"),s("ab8b"),s("ecee")),$e=s("ad3d"),He=s("c074");Re["c"].add(He["a"],He["d"],He["e"],He["b"],He["c"]),Object(r["c"])(w).use(Pe).use(Ae).component("font-awesome-icon",$e["a"]).mount("#app")},8098:function(e,t,s){"use strict";s("a16b")},a16b:function(e,t,s){}});
//# sourceMappingURL=app.f07b8f87.js.map